<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>H·ªá th·ªëng Thi Tr·∫Øc Nghi·ªám Y T·∫ø</title>
    <!-- Li√™n k·∫øt ƒë·∫øn file CSS b√™n ngo√†i -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- 1. Form ƒêƒÉng nh·∫≠p -->
        <div class="login-container" id="loginContainer">
            <div class="login-left">
                <div class="medical-icon">‚öïÔ∏è</div>
                <h1>H·ªá th·ªëng Thi Tr·∫Øc Nghi·ªám B·ªánh vi·ªán ƒêKKV C·∫ßu Ngang</h1>
                <p>ƒê√°nh gi√° nƒÉng l·ª±c, tuy·ªÉn d·ª•ng nh√¢n vi√™n</p>
            </div>
            <div class="login-right">
                <h2>ƒêƒÉng nh·∫≠p</h2>
                <div id="loginError" class="error-message"></div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username">T√™n ƒëƒÉng nh·∫≠p</label>
                        <input type="text" id="username" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p" required>
                    </div>
                    <div class="form-group">
                        <label for="password">M·∫≠t kh·∫©u</label>
                        <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
                    </div>
                    <button type="submit" class="btn-login" id="loginBtn">
                        <span>ƒêƒÉng nh·∫≠p</span>
                        <div class="loading-spinner" id="loadingSpinner"></div>
                    </button>
                </form>
            </div>
        </div>

        <!-- 2. Khu v·ª±c l√†m b√†i thi (Quiz) -->
        <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <h2 id="quizTitle">B√†i Thi Tr·∫Øc Nghi·ªám Y T·∫ø</h2>
                <div class="quiz-info">
                    <span id="userName">Th√≠ sinh: ...</span>
                    <span id="questionCount"></span>
                    <span id="timer">Th·ªùi gian: 30:00</span>
                </div>
            </div>
            <div id="questionContainer"></div>
            <div class="quiz-actions">
                <button class="btn btn-prev" id="prevBtn" onclick="previousQuestion()">C√¢u tr∆∞·ªõc</button>
                <button class="btn btn-next" id="nextBtn" onclick="nextQuestion()">C√¢u ti·∫øp</button>
                <button class="btn btn-submit" id="submitBtn" onclick="submitQuiz()" style="display: none;">N·ªôp
                    b√†i</button>
                <button class="btn" id="finishReviewBtn" onclick="finishReview()"
                    style="display: none; background: #64748b; color: white;">Tr·ªü v·ªÅ k·∫øt qu·∫£</button>
            </div>
        </div>

        <!-- 3. Khu v·ª±c K·∫øt qu·∫£ -->
        <div class="result-container" id="resultContainer" style="display: none;">
            <h2>üéâ Ho√†n th√†nh b√†i thi!</h2>
            <div id="processingMessage" style="color: #d97706; font-weight: bold; margin: 20px 0;">
                ƒêang l∆∞u k·∫øt qu·∫£... Vui l√≤ng ƒë·ª£i.
            </div>

            <div id="pdfResultArea" style="display: none; margin: 20px 0;">
                <p>‚úÖ ƒê√£ l∆∞u b√†i thi!</p>
                <a id="pdfLinkBtn" href="#" target="_blank" class="btn"
                    style="background: #ef4444; color: white; text-decoration: none; display: inline-block; margin-top: 10px;">
                    üìÇ Xem l·∫°i b√†i thi (PDF)
                </a>
            </div>

            <div id="scoreArea" style="display: none; margin-top: 20px;">
                <div class="result-score" id="resultScore">0/0</div>
                <div class="result-message" id="resultMessage"></div>
            </div>
            <div class="quiz-actions" style="justify-content: center; gap: 10px; margin-top: 30px;">
                <button class="btn" id="viewScoreBtn" onclick="showScore()"
                    style="background: #10b981; color: white; display: none;">Xem ƒëi·ªÉm s·ªë</button>
                <button class="btn" id="reviewQuizBtn" onclick="reviewQuiz()"
                    style="background: #f59e0b; color: white; display: none;">Xem l·∫°i b√†i l√†m</button>
                <button class="btn" onclick="logout()" style="background: #64748b; color: white;">ƒêƒÉng xu·∫•t</button>
            </div>
        </div>

        <!-- 4. KHU V·ª∞C ƒê√É THI R·ªíI -->
        <div id="leaderboardContainer" class="result-container" style="display: none;">
            <div style="font-size: 50px; margin-bottom: 20px;">üö´</div>
            <h2 style="color: #ef4444;">B·∫°n ƒë√£ ho√†n th√†nh b√†i thi n√†y!</h2>
            <p id="welcomeBackUser" style="margin: 10px 0; color: #475569;"></p>

            <div id="oldPdfLinkArea" style="margin: 20px 0;">
                <a id="oldPdfLinkBtn" href="#" target="_blank" class="btn"
                    style="background: #ef4444; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; font-weight: bold;">
                    üìÇ Xem l·∫°i b√†i thi c·ªßa b·∫°n
                </a>
            </div>

            <h3 style="margin-top: 30px; color: #3b82f6;">üèÜ B·∫¢NG X·∫æP H·∫†NG</h3>
            <div style="overflow-x: auto;">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Top</th>
                            <th>H·ªç T√™n</th>
                            <th>ƒêi·ªÉm</th>
                            <th>Th·ªùi gian</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody"></tbody>
                </table>
            </div>
            <button class="btn" onclick="logout()" style="background: #64748b; color: white; margin-top: 30px;">ƒêƒÉng
                xu·∫•t</button>
        </div>
    </div>

    <!-- 5. MODAL C·∫¢NH B√ÅO CH∆ØA L√ÄM XONG (C≈©) -->
    <div id="warningModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">‚ö†Ô∏è Ch∆∞a ho√†n th√†nh</div>
            <div class="modal-body">
                <p>B·∫°n v·∫´n c√≤n m·ªôt s·ªë c√¢u h·ªèi ch∆∞a tr·∫£ l·ªùi.</p>
                <p>Vui l√≤ng ch·ªçn v√†o s·ªë c√¢u b√™n d∆∞·ªõi ƒë·ªÉ l√†m ti·∫øp:</p>
                <div id="missingQuestionsList"
                    style="margin-top: 15px; display: flex; flex-wrap: wrap; justify-content: center;"></div>
            </div>
            <div class="modal-footer">
                <button onclick="closeWarningModal()">ƒê√≥ng v√† l√†m ti·∫øp</button>
            </div>
        </div>
    </div>

    <!-- 6. MODAL C·∫¢NH B√ÅO VI PH·∫†M (M·ªöI) -->
    <div id="violationModal" class="modal" style="background-color: rgba(220, 38, 38, 0.8);">
        <div class="modal-content" style="border: 2px solid #ef4444;">
            <div class="modal-header">‚õî C·∫¢NH B√ÅO VI PH·∫†M</div>
            <div class="modal-body">
                <p style="font-weight: bold; color: #b91c1c;">B·∫°n ƒë√£ r·ªùi kh·ªèi m√†n h√¨nh l√†m b√†i!</p>
                <p>H·ªá th·ªëng ph√°t hi·ªán b·∫°n ƒë√£ m·ªü ·ª©ng d·ª•ng kh√°c ho·∫∑c tab kh√°c.</p>
                <p style="margin-top: 15px; font-size: 18px; color: #ef4444;">
                    L·∫ßn vi ph·∫°m: <strong id="violationCountDisplay">0</strong> / 3
                </p>
                <p style="font-size: 13px; color: #64748b; margin-top: 10px;">N·∫øu vi ph·∫°m qu√° 3 l·∫ßn, b√†i thi s·∫Ω t·ª± ƒë·ªông
                    b·ªã n·ªôp.</p>
            </div>
            <div class="modal-footer">
                <button onclick="closeViolationModal()" style="background: #ef4444;">T√¥i ƒë√£ hi·ªÉu & Quay l·∫°i thi</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>